<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="styleSheet" href="./../css/タイピング枠落下.css">
    <audio src="./../sounds/高専祭　2-I-E/Book02-1(Flip).mp3"></audio>
    <title>単位を落とすな</title>
</head>
<body>
    <!--<p id="sixtyLine">60点ライン</p>
    <p id="time">残り時間:60秒</p>-->
    <div id="canvasMaster">
        <canvas id="lineCanvas" width="172px" height="512px"></canvas>
        <canvas id="canvas" width="768px" height="512px"></canvas>
        <canvas id="timeCanvas" width="172px" height="512px"></canvas><br>
        <a href="difficultySelecter.html">タイトルに戻る</a>
        <a>     </a>
        <a href="typingdroper.html">リトライ</a>
    </div><br>
    <div id="form" class="topDiv" style="display:none">
        <label for="username">ユーザーネーム入力</label>
        <input type="text" id="username">
        <button onclick="user(document.getElementById('username').value)">登録</button>
        <script>
            const form=document.getElementById("username");
            form.addEventListener("keypress",inputEnter,false);
            function inputEnter(e){
                if (e.key=="Enter")user(document.getElementById('username').value);
            }
            function user(name){
                var username=JSON.parse(localStorage.getItem("username")),difficulty=localStorage.getItem("difficulty");
                if (name.length>10||name.length==0){
                    document.getElementById("notification").innerHTML="1文字以上10文字以下で入力してください";
                }else{
                    switch (difficulty){
                        case "やさしい":difficulty="easy";break;
                        case "普通":difficulty="normal";break;
                        case "難しい":difficulty="hard";break;
                        case "地獄":difficulty="hell";break;
                    }
                    username[difficulty][localStorage.getItem("rank")]=name;
                    localStorage.setItem("username",JSON.stringify(username));
                    console.log(name);
                    document.getElementById("form").style.display="none";
                    document.getElementById("notification").innerHTML="入力しました";
                }
                //document.getElementById("notification").style.display="block";
            }
        </script>
    </div>
    <p id="notification" class="topDiv" style="display:block"></p>
    <!--<p id="zeroLine">0点ライン</p>-->
    <script type="module" src="./../js/タイピング枠落下.js"></script>
</body>
</html>